{
  "ast": "[\n  {\n    \"name\": \"User\",\n    \"schema\": {\n      \"id\": {\n        \"type\": \"uuid\",\n        \"primaryKey\": true\n      },\n      \"email\": {\n        \"type\": \"string\",\n        \"unique\": true\n      },\n      \"name\": {\n        \"type\": \"string\"\n      },\n      \"role\": {\n        \"type\": \"string\",\n        \"default\": \"(\"\n      },\n      \"isActive\": {\n        \"type\": \"boolean\",\n        \"default\": \"(true)\"\n      }\n    },\n    \"policies\": {},\n    \"relations\": [],\n    \"hooks\": [],\n    \"extensions\": []\n  },\n  {\n    \"name\": \"Post\",\n    \"schema\": {\n      \"id\": {\n        \"type\": \"uuid\",\n        \"primaryKey\": true\n      },\n      \"title\": {\n        \"type\": \"string\"\n      },\n      \"content\": {\n        \"type\": \"text\"\n      },\n      \"published\": {\n        \"type\": \"boolean\",\n        \"default\": \"(false)\"\n      },\n      \"authorId\": {\n        \"type\": \"uuid\"\n      }\n    },\n    \"policies\": {},\n    \"relations\": [\n      {\n        \"name\": \"author\",\n        \"type\": \"belongsTo\",\n        \"targetModelName\": \"User\",\n        \"foreignKey\": \"authorId\",\n        \"onDelete\": \"cascade\"\n      }\n    ],\n    \"hooks\": [],\n    \"extensions\": []\n  }\n]",
  "zod": "\nconst z = require(\"zod\").z;\n\n\nexport const UserSchema = z.object({\n  id: z.string().uuid(),\n  email: z.string(),\n  name: z.string(),\n  role: z.string(),\n  isActive: z.boolean(),\n});\n\nexport const CreateUserSchema = z.object({\n  email: z.string(),\n  name: z.string(),\n  role: z.string().optional(),\n  isActive: z.boolean().optional(),\n});\n\nexport const UpdateUserSchema = z.object({\n  email: z.string().optional(),\n  name: z.string().optional(),\n  role: z.string().optional(),\n  isActive: z.boolean().optional(),\n});\n\nexport type User = z.infer<typeof UserSchema>;\nexport type CreateUser = z.infer<typeof CreateUserSchema>;\nexport type UpdateUser = z.infer<typeof UpdateUserSchema>;\n\n\nexport const PostSchema = z.object({\n  id: z.string().uuid(),\n  title: z.string(),\n  content: z.string(),\n  published: z.boolean(),\n  authorId: z.string().uuid(),\n});\n\nexport const CreatePostSchema = z.object({\n  title: z.string(),\n  content: z.string(),\n  published: z.boolean().optional(),\n  authorId: z.string().uuid(),\n});\n\nexport const UpdatePostSchema = z.object({\n  title: z.string().optional(),\n  content: z.string().optional(),\n  published: z.boolean().optional(),\n  authorId: z.string().uuid().optional(),\n});\n\nexport type Post = z.infer<typeof PostSchema>;\nexport type CreatePost = z.infer<typeof CreatePostSchema>;\nexport type UpdatePost = z.infer<typeof UpdatePostSchema>;\n\n",
  "sql": "-- Forge migration generated at Wed, 19 Nov 2025 02:10:42 GMT\nCREATE TABLE IF NOT EXISTS users (\n  id UUID NOT NULL PRIMARY KEY DEFAULT uuid_generate_v4(),\n  email VARCHAR(255) NOT NULL UNIQUE,\n  name VARCHAR(255) NOT NULL,\n  role VARCHAR(255) NOT NULL DEFAULT (,\n  is_active BOOLEAN NOT NULL DEFAULT (true)\n);\nCREATE TABLE IF NOT EXISTS posts (\n  id UUID NOT NULL PRIMARY KEY DEFAULT uuid_generate_v4(),\n  title VARCHAR(255) NOT NULL,\n  content TEXT NOT NULL,\n  published BOOLEAN NOT NULL DEFAULT (false),\n  author_id UUID NOT NULL\n);\nALTER TABLE posts ADD CONSTRAINT fk_posts_author_id FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE;\n",
  "domain": "\n\n// THIS FILE IS AUTO-GENERATED BY FORGE. DO NOT EDIT.\nimport * as zod from './zod';\nimport * as sql from './sql';\n\nclass AuthorizationError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'AuthorizationError';\n    }\n}\n\n\nclass UserDomain {\n    deps = {};\n    injectDependencies(dependencies) {\n        this.deps = dependencies;\n    }\n\n    async create(ctx, data) {\n        \n        const validatedData = zod.CreateUserSchema.parse(data);\n        let fullData = validatedData;\n\n        \n\n        \n        \n        const paramKeys = Object.keys(fullData);\n        if(paramKeys.length === 0) {\n           throw new Error(\"Cannot create a record with no data.\");\n        }\n        const params = paramKeys.map(k => fullData[k]);\n        const query = `INSERT INTO users (${paramKeys.map(toSnakeCase).join(', ')}) VALUES (${paramKeys.map((_, i) => `$${i + 1}`).join(', ')}) RETURNING *;`;\n\n        const res = await ctx.db.query(query, params);\n        const result = res.rows[0];\n        ctx.audit.record('create', { model: 'User', id: result.id, userId: ctx.user.id, data: fullData });\n\n        \n\n        return zod.UserSchema.parse(result);\n        \n    }\n\n    async findById(ctx, id) {\n        const res = await ctx.db.query(sql.findUserById, [id]);\n        if (res.rows.length === 0) {\n            return null;\n        }\n        const result = zod.UserSchema.parse(res.rows[0]);\n        \n        return result;\n    }\n\n    async update(ctx, id, data) {\n        \n        let validatedData = zod.UpdateUserSchema.parse(data);\n        if (Object.keys(validatedData).length === 0) {\n            return this.findById(ctx, id);\n        }\n        const recordToUpdate = await this.findById(ctx, id); if (!recordToUpdate) { return null; }\n        \n        \n        \n        \n        const query = sql.updateUser(validatedData);\n        const params = [id, ...Object.values(validatedData)];\n\n        const res = await ctx.db.query(query, params);\n        if (res.rows.length === 0) {\n            return null;\n        }\n        const result = zod.UserSchema.parse(res.rows[0]);\n        ctx.audit.record('update', { model: 'User', id: result.id, userId: ctx.user.id, updates: validatedData });\n\n        \n\n        return result;\n        \n    }\n\n    async delete(ctx, id) {\n        \n        const recordToDelete = await this.findById(ctx, id); if (!recordToDelete) { return false; }\n        \n        \n        \n\n        const res = await ctx.db.query(sql.deleteUser, [id]);\n        if (res.rowCount > 0) {\n            ctx.audit.record('delete', { model: 'User', id, userId: ctx.user.id });\n\n            \n            return true;\n        }\n        return false;\n        \n    }\n    \n    \n\n    \n}\n\n\nclass PostDomain {\n    deps = {};\n    injectDependencies(dependencies) {\n        this.deps = dependencies;\n    }\n\n    async create(ctx, data) {\n        \n        const validatedData = zod.CreatePostSchema.parse(data);\n        let fullData = validatedData;\n\n        \n\n        \n        \n        const paramKeys = Object.keys(fullData);\n        if(paramKeys.length === 0) {\n           throw new Error(\"Cannot create a record with no data.\");\n        }\n        const params = paramKeys.map(k => fullData[k]);\n        const query = `INSERT INTO posts (${paramKeys.map(toSnakeCase).join(', ')}) VALUES (${paramKeys.map((_, i) => `$${i + 1}`).join(', ')}) RETURNING *;`;\n\n        const res = await ctx.db.query(query, params);\n        const result = res.rows[0];\n        ctx.audit.record('create', { model: 'Post', id: result.id, userId: ctx.user.id, data: fullData });\n\n        \n\n        return zod.PostSchema.parse(result);\n        \n    }\n\n    async findById(ctx, id) {\n        const res = await ctx.db.query(sql.findPostById, [id]);\n        if (res.rows.length === 0) {\n            return null;\n        }\n        const result = zod.PostSchema.parse(res.rows[0]);\n        \n        return result;\n    }\n\n    async update(ctx, id, data) {\n        \n        let validatedData = zod.UpdatePostSchema.parse(data);\n        if (Object.keys(validatedData).length === 0) {\n            return this.findById(ctx, id);\n        }\n        const recordToUpdate = await this.findById(ctx, id); if (!recordToUpdate) { return null; }\n        \n        \n        \n        \n        const query = sql.updatePost(validatedData);\n        const params = [id, ...Object.values(validatedData)];\n\n        const res = await ctx.db.query(query, params);\n        if (res.rows.length === 0) {\n            return null;\n        }\n        const result = zod.PostSchema.parse(res.rows[0]);\n        ctx.audit.record('update', { model: 'Post', id: result.id, userId: ctx.user.id, updates: validatedData });\n\n        \n\n        return result;\n        \n    }\n\n    async delete(ctx, id) {\n        \n        const recordToDelete = await this.findById(ctx, id); if (!recordToDelete) { return false; }\n        \n        \n        \n\n        const res = await ctx.db.query(sql.deletePost, [id]);\n        if (res.rowCount > 0) {\n            ctx.audit.record('delete', { model: 'Post', id, userId: ctx.user.id });\n\n            \n            return true;\n        }\n        return false;\n        \n    }\n    \n    \n    async findAuthorForPost(ctx, record) {\n        if (!record.authorId) return null;\n        // This automatically uses the target's findById, which includes its own read policies.\n        return this.deps.userDomain.findById(ctx, record.authorId);\n    }\n\n\n    \n}\n\nconst userDomain = new UserDomain();\nconst postDomain = new PostDomain();\n\n// --- Dependency Injection for Relation Helpers ---\nconst allDomains = { userDomain, postDomain };\nfor (const domain of Object.values(allDomains)) {\n    if (typeof domain.injectDependencies === 'function') {\n        domain.injectDependencies(allDomains);\n    }\n}\n    \n",
  "rls": "\n-- THIS FILE IS AUTO-GENERATED BY FORGE. DO NOT EDIT.\n-- Ensure you have a user context setter function, e.g.:\n-- CREATE OR REPLACE FUNCTION set_laforge_context(user_id UUID, tenant_id UUID, user_role TEXT)\n-- RETURNS void AS $$\n-- BEGIN\n--   PERFORM set_config('laforge.user_id', user_id::text, false);\n--   PERFORM set_config('laforge.tenant_id', tenant_id::text, false);\n--   PERFORM set_config('laforge.user_role', user_role, false);\n-- END;\n-- $$ LANGUAGE plpgsql;\n\n\n-- RLS Policies for users\nALTER TABLE users ENABLE ROW LEVEL SECURITY;\nDROP POLICY IF EXISTS forge_delete_users ON users;\nDROP POLICY IF EXISTS forge_update_users ON users;\nDROP POLICY IF EXISTS forge_select_users ON users;\nDROP POLICY IF EXISTS forge_insert_users ON users;\nCREATE POLICY forge_insert_users ON users FOR INSERT WITH CHECK true;\n\n-- RLS Policies for posts\nALTER TABLE posts ENABLE ROW LEVEL SECURITY;\nDROP POLICY IF EXISTS forge_delete_posts ON posts;\nDROP POLICY IF EXISTS forge_update_posts ON posts;\nDROP POLICY IF EXISTS forge_select_posts ON posts;\nDROP POLICY IF EXISTS forge_insert_posts ON posts;\nCREATE POLICY forge_insert_posts ON posts FOR INSERT WITH CHECK true;\n",
  "routes": "\n// THIS FILE IS AUTO-GENERATED BY FORGE. DO NOT EDIT.\n\nimport { FastifyInstance, FastifyRequest } from 'fastify';\nimport { Pool } from 'pg';\nimport { userDomain, postDomain, DomainContext, UserContext, AuditContext } from './domain';\n\n// You must provide a database pool and a function to get the user from a request.\nexport interface ForgeAdapterOptions {\n    dbPool: Pool;\n    getUserFromRequest: (request: FastifyRequest) => UserContext | Promise<UserContext>;\n    auditLogProvider?: AuditContext;\n}\n\nfunction createDefaultAuditContext(): AuditContext {\n    return {\n        record: (action, details) => {\n            console.log(`[AUDIT] Action: ${action}, Details: ${JSON.stringify(details)}`);\n        }\n    };\n}\n\nexport function createForgeRouter(options: ForgeAdapterOptions) {\n    return async function forgeRouter(fastify: FastifyInstance) {\n        \n        const createDomainContext = async (request: FastifyRequest): Promise<DomainContext> => {\n            const user = (request as any).user as UserContext;\n            return {\n                user,\n                db: options.dbPool,\n                audit: options.auditLogProvider || createDefaultAuditContext(),\n            };\n        };\n\n        fastify.addHook('preHandler', async (request, reply) => {\n            try {\n                // Attach user to request for use in createDomainContext\n                (request as any).user = await options.getUserFromRequest(request);\n            } catch (error) {\n                reply.code(401).send({ error: 'Unauthorized' });\n            }\n        });\n\n        \n    // --- Routes for User ---\n    \n    fastify.post('/user', async (request, reply) => {\n        const ctx = await createDomainContext(request);\n        const result = await userDomain.create(ctx, request.body as any);\n        reply.code(201).send(result);\n    });\n\n    fastify.get('/user/:id', async (request, reply) => {\n        const { id } = request.params as any;\n        const ctx = await createDomainContext(request);\n        const result = await userDomain.findById(ctx, id);\n        if (result) {\n            reply.send(result);\n        } else {\n            reply.code(404).send({ error: 'User not found' });\n        }\n    });\n\n    fastify.patch('/user/:id', async (request, reply) => {\n        const { id } = request.params as any;\n        const ctx = await createDomainContext(request);\n        const result = await userDomain.update(ctx, id, request.body as any);\n         if (result) {\n            reply.send(result);\n        } else {\n            reply.code(404).send({ error: 'User not found' });\n        }\n    });\n\n    fastify.delete('/user/:id', async (request, reply) => {\n        const { id } = request.params as any;\n        const ctx = await createDomainContext(request);\n        const success = await userDomain.delete(ctx, id);\n        if (success) {\n            reply.code(204).send();\n        } else {\n            reply.code(404).send({ error: 'User not found' });\n        }\n    });\n\n    // --- Routes for Post ---\n    \n    fastify.post('/post', async (request, reply) => {\n        const ctx = await createDomainContext(request);\n        const result = await postDomain.create(ctx, request.body as any);\n        reply.code(201).send(result);\n    });\n\n    fastify.get('/post/:id', async (request, reply) => {\n        const { id } = request.params as any;\n        const ctx = await createDomainContext(request);\n        const result = await postDomain.findById(ctx, id);\n        if (result) {\n            reply.send(result);\n        } else {\n            reply.code(404).send({ error: 'Post not found' });\n        }\n    });\n\n    fastify.patch('/post/:id', async (request, reply) => {\n        const { id } = request.params as any;\n        const ctx = await createDomainContext(request);\n        const result = await postDomain.update(ctx, id, request.body as any);\n         if (result) {\n            reply.send(result);\n        } else {\n            reply.code(404).send({ error: 'Post not found' });\n        }\n    });\n\n    fastify.delete('/post/:id', async (request, reply) => {\n        const { id } = request.params as any;\n        const ctx = await createDomainContext(request);\n        const success = await postDomain.delete(ctx, id);\n        if (success) {\n            reply.code(204).send();\n        } else {\n            reply.code(404).send({ error: 'Post not found' });\n        }\n    });\n\n    }\n}\n",
  "models": [
    {
      "name": "User",
      "schema": {
        "id": {
          "type": "uuid",
          "primaryKey": true
        },
        "email": {
          "type": "string",
          "unique": true
        },
        "name": {
          "type": "string"
        },
        "role": {
          "type": "string",
          "default": "("
        },
        "isActive": {
          "type": "boolean",
          "default": "(true)"
        }
      },
      "policies": {},
      "relations": [],
      "hooks": [],
      "extensions": []
    },
    {
      "name": "Post",
      "schema": {
        "id": {
          "type": "uuid",
          "primaryKey": true
        },
        "title": {
          "type": "string"
        },
        "content": {
          "type": "text"
        },
        "published": {
          "type": "boolean",
          "default": "(false)"
        },
        "authorId": {
          "type": "uuid"
        }
      },
      "policies": {},
      "relations": [
        {
          "name": "author",
          "type": "belongsTo",
          "targetModelName": "User",
          "foreignKey": "authorId",
          "onDelete": "cascade"
        }
      ],
      "hooks": [],
      "extensions": []
    }
  ],
  "migrations": [
    {
      "filePath": "migrations/20251119T02104_schema.sql",
      "content": "-- Forge migration generated at Wed, 19 Nov 2025 02:10:42 GMT\nCREATE TABLE IF NOT EXISTS users (\n  id UUID NOT NULL PRIMARY KEY DEFAULT uuid_generate_v4(),\n  email VARCHAR(255) NOT NULL UNIQUE,\n  name VARCHAR(255) NOT NULL,\n  role VARCHAR(255) NOT NULL DEFAULT (,\n  is_active BOOLEAN NOT NULL DEFAULT (true)\n);\nCREATE TABLE IF NOT EXISTS posts (\n  id UUID NOT NULL PRIMARY KEY DEFAULT uuid_generate_v4(),\n  title VARCHAR(255) NOT NULL,\n  content TEXT NOT NULL,\n  published BOOLEAN NOT NULL DEFAULT (false),\n  author_id UUID NOT NULL\n);\nALTER TABLE posts ADD CONSTRAINT fk_posts_author_id FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE;\n"
    }
  ],
  "config": {
    "domain": [],
    "outDir": "generated",
    "db": "postgres",
    "dialect": "postgres-rds",
    "audit": true,
    "multiTenant": true,
    "useSchemas": false,
    "migrations": {
      "allowDestructive": false
    },
    "frontend": "react"
  },
  "zodSchemas": "\nconst z = require(\"zod\").z;\n\n\nexport const UserSchema = z.object({\n  id: z.string().uuid(),\n  email: z.string(),\n  name: z.string(),\n  role: z.string(),\n  isActive: z.boolean(),\n});\n\nexport const CreateUserSchema = z.object({\n  email: z.string(),\n  name: z.string(),\n  role: z.string().optional(),\n  isActive: z.boolean().optional(),\n});\n\nexport const UpdateUserSchema = z.object({\n  email: z.string().optional(),\n  name: z.string().optional(),\n  role: z.string().optional(),\n  isActive: z.boolean().optional(),\n});\n\nexport type User = z.infer<typeof UserSchema>;\nexport type CreateUser = z.infer<typeof CreateUserSchema>;\nexport type UpdateUser = z.infer<typeof UpdateUserSchema>;\n\n\nexport const PostSchema = z.object({\n  id: z.string().uuid(),\n  title: z.string(),\n  content: z.string(),\n  published: z.boolean(),\n  authorId: z.string().uuid(),\n});\n\nexport const CreatePostSchema = z.object({\n  title: z.string(),\n  content: z.string(),\n  published: z.boolean().optional(),\n  authorId: z.string().uuid(),\n});\n\nexport const UpdatePostSchema = z.object({\n  title: z.string().optional(),\n  content: z.string().optional(),\n  published: z.boolean().optional(),\n  authorId: z.string().uuid().optional(),\n});\n\nexport type Post = z.infer<typeof PostSchema>;\nexport type CreatePost = z.infer<typeof CreatePostSchema>;\nexport type UpdatePost = z.infer<typeof UpdatePostSchema>;\n\n",
  "sqlQueries": "-- Forge migration generated at Wed, 19 Nov 2025 02:10:42 GMT\nCREATE TABLE IF NOT EXISTS users (\n  id UUID NOT NULL PRIMARY KEY DEFAULT uuid_generate_v4(),\n  email VARCHAR(255) NOT NULL UNIQUE,\n  name VARCHAR(255) NOT NULL,\n  role VARCHAR(255) NOT NULL DEFAULT (,\n  is_active BOOLEAN NOT NULL DEFAULT (true)\n);\nCREATE TABLE IF NOT EXISTS posts (\n  id UUID NOT NULL PRIMARY KEY DEFAULT uuid_generate_v4(),\n  title VARCHAR(255) NOT NULL,\n  content TEXT NOT NULL,\n  published BOOLEAN NOT NULL DEFAULT (false),\n  author_id UUID NOT NULL\n);\nALTER TABLE posts ADD CONSTRAINT fk_posts_author_id FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE;\n",
  "reactApp": [
    {
      "filePath": "package.json",
      "content": "{\n  \"name\": \"laforge-app\",\n  \"private\": true,\n  \"version\": \"0.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"tsc && vite build\",\n    \"lint\": \"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0\",\n    \"preview\": \"vite preview\",\n    \"test\": \"vitest\"\n  },\n  \"dependencies\": {\n    \"react\": \"^18.2.0\",\n    \"react-dom\": \"^18.2.0\",\n    \"react-router-dom\": \"^6.22.3\",\n    \"@tanstack/react-query\": \"^5.28.4\",\n    \"axios\": \"^1.6.8\",\n    \"clsx\": \"^2.1.0\",\n    \"tailwind-merge\": \"^2.2.2\",\n    \"postcss\": \"^8.4.38\",\n    \"tailwindcss\": \"^3.4.1\",\n    \"typescript\": \"^5.2.2\",\n    \"vite\": \"^5.2.0\",\n    \"vitest\": \"^1.4.0\",\n    \"@testing-library/react\": \"^14.2.2\",\n    \"@testing-library/jest-dom\": \"^6.4.2\",\n    \"@testing-library/user-event\": \"^14.5.2\",\n    \"jsdom\": \"^24.0.0\",\n    \"@types/node\": \"^20.11.30\"\n  }\n}"
    },
    {
      "filePath": "vite.config.ts",
      "content": "\nimport { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\nimport path from 'path'\n\nexport default defineConfig({\n  plugins: [react()],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(__dirname, \"./src\"),\n    },\n  },\n})\n"
    },
    {
      "filePath": "tsconfig.json",
      "content": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"useDefineForClassFields\": true,\n    \"lib\": [\n      \"ES2020\",\n      \"DOM\",\n      \"DOM.Iterable\"\n    ],\n    \"module\": \"ESNext\",\n    \"skipLibCheck\": true,\n    \"moduleResolution\": \"bundler\",\n    \"allowImportingTsExtensions\": true,\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"noEmit\": true,\n    \"jsx\": \"react-jsx\",\n    \"strict\": true,\n    \"noUnusedLocals\": true,\n    \"noUnusedParameters\": true,\n    \"noFallthroughCasesInSwitch\": true,\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\n        \"./src/*\"\n      ]\n    }\n  },\n  \"include\": [\n    \"src\"\n  ],\n  \"references\": [\n    {\n      \"path\": \"./tsconfig.node.json\"\n    }\n  ]\n}"
    },
    {
      "filePath": "tsconfig.node.json",
      "content": "{\n  \"compilerOptions\": {\n    \"composite\": true,\n    \"skipLibCheck\": true,\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"bundler\",\n    \"allowSyntheticDefaultImports\": true\n  },\n  \"include\": [\n    \"vite.config.ts\"\n  ]\n}"
    },
    {
      "filePath": "index.html",
      "content": "\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>LaForge App</title>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script type=\"module\" src=\"/src/main.tsx\"></script>\n  </body>\n</html>\n"
    },
    {
      "filePath": "src/main.tsx",
      "content": "\nimport React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\n\nconst queryClient = new QueryClient()\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <App />\n    </QueryClientProvider>\n  </React.StrictMode>,\n)\n"
    },
    {
      "filePath": "src/index.css",
      "content": "\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  :root {\n    --background: 0 0% 100%;\n    --foreground: 222.2 84% 4.9%;\n    --card: 0 0% 100%;\n    --card-foreground: 222.2 84% 4.9%;\n    --popover: 0 0% 100%;\n    --popover-foreground: 222.2 84% 4.9%;\n    --primary: 221.2 83.2% 53.3%;\n    --primary-foreground: 210 40% 98%;\n    --secondary: 210 40% 96.1%;\n    --secondary-foreground: 222.2 47.4% 11.2%;\n    --muted: 210 40% 96.1%;\n    --muted-foreground: 215.4 16.3% 46.9%;\n    --accent: 210 40% 96.1%;\n    --accent-foreground: 222.2 47.4% 11.2%;\n    --destructive: 0 84.2% 60.2%;\n    --destructive-foreground: 210 40% 98%;\n    --border: 214.3 31.8% 91.4%;\n    --input: 214.3 31.8% 91.4%;\n    --ring: 221.2 83.2% 53.3%;\n    --radius: 0.5rem;\n  }\n \n  .dark {\n    --background: 222.2 84% 4.9%;\n    --foreground: 210 40% 98%;\n    --card: 222.2 84% 4.9%;\n    --card-foreground: 210 40% 98%;\n    --popover: 222.2 84% 4.9%;\n    --popover-foreground: 210 40% 98%;\n    --primary: 217.2 91.2% 59.8%;\n    --primary-foreground: 222.2 47.4% 11.2%;\n    --secondary: 217.2 32.6% 17.5%;\n    --secondary-foreground: 210 40% 98%;\n    --muted: 217.2 32.6% 17.5%;\n    --muted-foreground: 215 20.2% 65.1%;\n    --accent: 217.2 32.6% 17.5%;\n    --accent-foreground: 210 40% 98%;\n    --destructive: 0 62.8% 30.6%;\n    --destructive-foreground: 210 40% 98%;\n    --border: 217.2 32.6% 17.5%;\n    --input: 217.2 32.6% 17.5%;\n    --ring: 212.7 26.8% 83.9%;\n  }\n}\n \n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n"
    },
    {
      "filePath": "src/lib/utils.ts",
      "content": "\nimport { type ClassValue, clsx } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n \nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"
    },
    {
      "filePath": "src/App.tsx",
      "content": "\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { Layout } from './components/Layout';\nimport { Dashboard } from './pages/Dashboard';\nimport { useRealtime } from './lib/realtime';\nimport { UserList } from './pages/UserList';\nimport { UserForm } from './pages/UserForm';\nimport { UserDetail } from './pages/UserDetail';\nimport { PostList } from './pages/PostList';\nimport { PostForm } from './pages/PostForm';\nimport { PostDetail } from './pages/PostDetail';\n\nfunction App() {\n  useRealtime();\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={<Layout />}>\n          <Route index element={<Dashboard />} />\n          \n          <Route path=\"users\" element={<UserList />} />\n          <Route path=\"users/new\" element={<UserForm />} />\n          <Route path=\"users/:id\" element={<UserDetail />} />\n          <Route path=\"users/:id/edit\" element={<UserForm />} />\n          \n          <Route path=\"posts\" element={<PostList />} />\n          <Route path=\"posts/new\" element={<PostForm />} />\n          <Route path=\"posts/:id\" element={<PostDetail />} />\n          <Route path=\"posts/:id/edit\" element={<PostForm />} />\n          \n        </Route>\n      </Routes>\n    </Router>\n  )\n}\n\nexport default App\n    "
    },
    {
      "filePath": "src/components/Layout.tsx",
      "content": "\nimport { Link, Outlet } from 'react-router-dom';\n\nexport function Layout() {\n  return (\n    <div className=\"flex h-screen bg-background\">\n      <aside className=\"w-64 border-r bg-card p-4\">\n        <h1 className=\"text-xl font-bold mb-6\">LaForge App</h1>\n        <nav className=\"space-y-2\">\n          <Link to=\"/\" className=\"block p-2 rounded hover:bg-accent\">Dashboard</Link>\n          <Link to=\"/users\" className=\"block p-2 rounded hover:bg-accent\">Users</Link>\n          <Link to=\"/posts\" className=\"block p-2 rounded hover:bg-accent\">Posts</Link>\n        </nav>\n      </aside>\n      <main className=\"flex-1 p-8 overflow-auto\">\n        <Outlet />\n      </main>\n    </div>\n  );\n}\n"
    },
    {
      "filePath": "src/pages/Dashboard.tsx",
      "content": "\nexport function Dashboard() {\n  return (\n    <div>\n      <h2 className=\"text-3xl font-bold tracking-tight\">Dashboard</h2>\n      <p className=\"text-muted-foreground\">Welcome to your generated app.</p>\n    </div>\n  );\n}\n"
    },
    {
      "filePath": "src/pages/UserList.tsx",
      "content": "\nimport { Link } from 'react-router-dom';\nimport { useUsers, useDeleteUser } from '@/lib/queries';\nimport { Button } from '@/components/ui/button';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\n\nexport function UserList() {\n  const { data: users, isLoading, error } = useUsers();\n  const deleteMutation = useDeleteUser();\n\n  if (isLoading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-3xl font-bold tracking-tight\">Users</h2>\n        <Button asChild>\n          <Link to=\"/users/new\">Create User</Link>\n        </Button>\n      </div>\n\n      <div className=\"rounded-md border\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>email</TableHead>\n              <TableHead>name</TableHead>\n              <TableHead>role</TableHead>\n              <TableHead>isActive</TableHead>\n              <TableHead className=\"text-right\">Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {users?.map((item) => (\n              <TableRow key={item.id}>\n                <TableCell>{String(item.email)}</TableCell>\n                <TableCell>{String(item.name)}</TableCell>\n                <TableCell>{String(item.role)}</TableCell>\n                <TableCell>{String(item.isActive)}</TableCell>\n                <TableCell className=\"text-right space-x-2\">\n                  <Button variant=\"outline\" size=\"sm\" asChild>\n                    <Link to={`/users/${item.id}`}>Edit</Link>\n                  </Button>\n                  <Button \n                    variant=\"destructive\" \n                    size=\"sm\"\n                    onClick={() => {\n                      if (confirm('Are you sure?')) {\n                        deleteMutation.mutate(item.id);\n                      }\n                    }}\n                  >\n                    Delete\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "filePath": "src/pages/UserDetail.tsx",
      "content": "\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport { useUser, useDeleteUser } from '@/lib/queries';\nimport { Button } from '@/components/ui/button';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\n\nexport function UserDetail() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { data: item, isLoading, error } = useUser(id || '');\n  const deleteMutation = useDeleteUser();\n\n  if (isLoading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n  if (!item) return <div>Not found</div>;\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-3xl font-bold tracking-tight\">User Details</h2>\n        <div className=\"space-x-2\">\n          <Button variant=\"outline\" asChild>\n            <Link to=\"/users\">Back</Link>\n          </Button>\n          <Button asChild>\n            <Link to={`/users/${item.id}/edit`}>Edit</Link>\n          </Button>\n          <Button \n            variant=\"destructive\" \n            onClick={() => {\n              if (confirm('Are you sure?')) {\n                deleteMutation.mutate(item.id, {\n                  onSuccess: () => navigate('/users')\n                });\n              }\n            }}\n          >\n            Delete\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"rounded-md border p-4\">\n        <dl className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n          \n          <div className=\"grid gap-1\">\n            <dt className=\"text-sm font-medium text-muted-foreground\">email</dt>\n            <dd className=\"text-sm font-semibold\">{String(item.email)}</dd>\n          </div>\n          \n          <div className=\"grid gap-1\">\n            <dt className=\"text-sm font-medium text-muted-foreground\">name</dt>\n            <dd className=\"text-sm font-semibold\">{String(item.name)}</dd>\n          </div>\n          \n          <div className=\"grid gap-1\">\n            <dt className=\"text-sm font-medium text-muted-foreground\">role</dt>\n            <dd className=\"text-sm font-semibold\">{String(item.role)}</dd>\n          </div>\n          \n          <div className=\"grid gap-1\">\n            <dt className=\"text-sm font-medium text-muted-foreground\">isActive</dt>\n            <dd className=\"text-sm font-semibold\">{String(item.isActive)}</dd>\n          </div>\n        </dl>\n      </div>\n  );\n}\n"
    },
    {
      "filePath": "src/pages/UserForm.tsx",
      "content": "\nimport { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useUser, useCreateUser, useUpdateUser } from '@/lib/queries';\n\nimport { UserSchema, CreateUserSchema } from '@/lib/schemas';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\"\nimport { z } from 'zod';\n\ntype FormData = z.infer<typeof CreateUserSchema>;\n\nexport function UserForm() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const isEdit = !!id;\n\n  const { data: record, isLoading } = useUser(id || '');\n  const createMutation = useCreateUser();\n  const updateMutation = useUpdateUser();\n\n  // Fetch relations\n  \n\n  const form = useForm<FormData>({\n    resolver: zodResolver(CreateUserSchema),\n  });\n\n  useEffect(() => {\n    if (record) {\n      form.reset(record);\n    }\n  }, [record, form]);\n\n  const onSubmit = (data: FormData) => {\n    if (isEdit && id) {\n      updateMutation.mutate({ id, data }, {\n        onSuccess: () => navigate('/users')\n      });\n    } else {\n      createMutation.mutate(data, {\n        onSuccess: () => navigate('/users')\n      });\n    }\n  };\n\n  if (isEdit && isLoading) return <div>Loading...</div>;\n\n  return (\n    <div className=\"max-w-lg mx-auto\">\n      <h2 className=\"text-2xl font-bold mb-6\">{isEdit ? 'Edit' : 'Create'} User</h2>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"email\">email</Label>\n          <Input id=\"email\" {...form.register('email')} />\n          {form.formState.errors.email && <p className=\"text-sm text-red-500\">{form.formState.errors.email?.message}</p>}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"name\">name</Label>\n          <Input id=\"name\" {...form.register('name')} />\n          {form.formState.errors.name && <p className=\"text-sm text-red-500\">{form.formState.errors.name?.message}</p>}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"role\">role</Label>\n          <Input id=\"role\" {...form.register('role')} />\n          {form.formState.errors.role && <p className=\"text-sm text-red-500\">{form.formState.errors.role?.message}</p>}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"isActive\">isActive</Label>\n          <Input id=\"isActive\" {...form.register('isActive')} />\n          {form.formState.errors.isActive && <p className=\"text-sm text-red-500\">{form.formState.errors.isActive?.message}</p>}\n        </div>\n        \n        < div className=\"flex gap-2\" >\n            <Button type=\"submit\" disabled = { createMutation.isPending || updateMutation.isPending } >\n                { isEdit? 'Update': 'Create' }\n                </Button>\n                < Button type=\"button\" variant=\"outline\" onClick={() => navigate('/users')\n        } >\n            Cancel\n            </Button>\n            </div>\n            </form>\n            </div>\n        );\n    }\n"
    },
    {
      "filePath": "src/pages/PostList.tsx",
      "content": "\nimport { Link } from 'react-router-dom';\nimport { usePosts, useDeletePost } from '@/lib/queries';\nimport { Button } from '@/components/ui/button';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\n\nexport function PostList() {\n  const { data: posts, isLoading, error } = usePosts();\n  const deleteMutation = useDeletePost();\n\n  if (isLoading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-3xl font-bold tracking-tight\">Posts</h2>\n        <Button asChild>\n          <Link to=\"/posts/new\">Create Post</Link>\n        </Button>\n      </div>\n\n      <div className=\"rounded-md border\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>title</TableHead>\n              <TableHead>content</TableHead>\n              <TableHead>published</TableHead>\n              <TableHead>authorId</TableHead>\n              <TableHead className=\"text-right\">Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {posts?.map((item) => (\n              <TableRow key={item.id}>\n                <TableCell>{String(item.title)}</TableCell>\n                <TableCell>{String(item.content)}</TableCell>\n                <TableCell>{String(item.published)}</TableCell>\n                <TableCell>{String(item.authorId)}</TableCell>\n                <TableCell className=\"text-right space-x-2\">\n                  <Button variant=\"outline\" size=\"sm\" asChild>\n                    <Link to={`/posts/${item.id}`}>Edit</Link>\n                  </Button>\n                  <Button \n                    variant=\"destructive\" \n                    size=\"sm\"\n                    onClick={() => {\n                      if (confirm('Are you sure?')) {\n                        deleteMutation.mutate(item.id);\n                      }\n                    }}\n                  >\n                    Delete\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "filePath": "src/pages/PostDetail.tsx",
      "content": "\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport { usePost, useDeletePost } from '@/lib/queries';\nimport { Button } from '@/components/ui/button';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\n\nexport function PostDetail() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { data: item, isLoading, error } = usePost(id || '');\n  const deleteMutation = useDeletePost();\n\n  if (isLoading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n  if (!item) return <div>Not found</div>;\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-3xl font-bold tracking-tight\">Post Details</h2>\n        <div className=\"space-x-2\">\n          <Button variant=\"outline\" asChild>\n            <Link to=\"/posts\">Back</Link>\n          </Button>\n          <Button asChild>\n            <Link to={`/posts/${item.id}/edit`}>Edit</Link>\n          </Button>\n          <Button \n            variant=\"destructive\" \n            onClick={() => {\n              if (confirm('Are you sure?')) {\n                deleteMutation.mutate(item.id, {\n                  onSuccess: () => navigate('/posts')\n                });\n              }\n            }}\n          >\n            Delete\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"rounded-md border p-4\">\n        <dl className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n          \n          <div className=\"grid gap-1\">\n            <dt className=\"text-sm font-medium text-muted-foreground\">title</dt>\n            <dd className=\"text-sm font-semibold\">{String(item.title)}</dd>\n          </div>\n          \n          <div className=\"grid gap-1\">\n            <dt className=\"text-sm font-medium text-muted-foreground\">content</dt>\n            <dd className=\"text-sm font-semibold\">{String(item.content)}</dd>\n          </div>\n          \n          <div className=\"grid gap-1\">\n            <dt className=\"text-sm font-medium text-muted-foreground\">published</dt>\n            <dd className=\"text-sm font-semibold\">{String(item.published)}</dd>\n          </div>\n          \n          <div className=\"grid gap-1\">\n            <dt className=\"text-sm font-medium text-muted-foreground\">authorId</dt>\n            <dd className=\"text-sm font-semibold\">{String(item.authorId)}</dd>\n          </div>\n        </dl>\n      </div>\n  );\n}\n"
    },
    {
      "filePath": "src/pages/PostForm.tsx",
      "content": "\nimport { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { usePost, useCreatePost, useUpdatePost } from '@/lib/queries';\nimport { useUsers } from '@/lib/queries';\nimport { PostSchema, CreatePostSchema } from '@/lib/schemas';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\"\nimport { z } from 'zod';\n\ntype FormData = z.infer<typeof CreatePostSchema>;\n\nexport function PostForm() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const isEdit = !!id;\n\n  const { data: record, isLoading } = usePost(id || '');\n  const createMutation = useCreatePost();\n  const updateMutation = useUpdatePost();\n\n  // Fetch relations\n  const { data: users } = useUsers();\n\n  const form = useForm<FormData>({\n    resolver: zodResolver(CreatePostSchema),\n  });\n\n  useEffect(() => {\n    if (record) {\n      form.reset(record);\n    }\n  }, [record, form]);\n\n  const onSubmit = (data: FormData) => {\n    if (isEdit && id) {\n      updateMutation.mutate({ id, data }, {\n        onSuccess: () => navigate('/posts')\n      });\n    } else {\n      createMutation.mutate(data, {\n        onSuccess: () => navigate('/posts')\n      });\n    }\n  };\n\n  if (isEdit && isLoading) return <div>Loading...</div>;\n\n  return (\n    <div className=\"max-w-lg mx-auto\">\n      <h2 className=\"text-2xl font-bold mb-6\">{isEdit ? 'Edit' : 'Create'} Post</h2>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"title\">title</Label>\n          <Input id=\"title\" {...form.register('title')} />\n          {form.formState.errors.title && <p className=\"text-sm text-red-500\">{form.formState.errors.title?.message}</p>}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"content\">content</Label>\n          <Input id=\"content\" {...form.register('content')} />\n          {form.formState.errors.content && <p className=\"text-sm text-red-500\">{form.formState.errors.content?.message}</p>}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"published\">published</Label>\n          <Input id=\"published\" {...form.register('published')} />\n          {form.formState.errors.published && <p className=\"text-sm text-red-500\">{form.formState.errors.published?.message}</p>}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"authorId\">author</Label>\n          <Select onValueChange={(value) => form.setValue('authorId', value)} defaultValue={record?.authorId}>\n            <SelectTrigger>\n              <SelectValue placeholder=\"Select User\" />\n            </SelectTrigger>\n            <SelectContent>\n              {users?.map((item) => (\n                <SelectItem key={item.id} value={item.id}>\n                  {item.name || item.title || item.id}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          {form.formState.errors.authorId && <p className=\"text-sm text-red-500\">{form.formState.errors.authorId?.message}</p>}\n        </div>\n        \n        < div className=\"flex gap-2\" >\n            <Button type=\"submit\" disabled = { createMutation.isPending || updateMutation.isPending } >\n                { isEdit? 'Update': 'Create' }\n                </Button>\n                < Button type=\"button\" variant=\"outline\" onClick={() => navigate('/posts')\n        } >\n            Cancel\n            </Button>\n            </div>\n            </form>\n            </div>\n        );\n    }\n"
    },
    {
      "filePath": "tailwind.config.js",
      "content": "\n        /** @type {import('tailwindcss').Config} */\n        export default {\n        darkMode: [\"class\"],\n        content: [\n            './pages/**/*.{ts,tsx}',\n            './components/**/*.{ts,tsx}',\n            './app/**/*.{ts,tsx}',\n            './src/**/*.{ts,tsx}',\n        ],\n        theme: {\n            container: {\n                center: true,\n                padding: \"2rem\",\n                screens: {\n                    \"2xl\": \"1400px\",\n                },\n            },\n            extend: {\n                colors: {\n                    border: \"hsl(var(--border))\",\n                    input: \"hsl(var(--input))\",\n                    ring: \"hsl(var(--ring))\",\n                    background: \"hsl(var(--background))\",\n                    foreground: \"hsl(var(--foreground))\",\n                    primary: {\n                        DEFAULT: \"hsl(var(--primary))\",\n                        foreground: \"hsl(var(--primary-foreground))\",\n                    },\n                    secondary: {\n                        DEFAULT: \"hsl(var(--secondary))\",\n                        foreground: \"hsl(var(--secondary-foreground))\",\n                    },\n                    destructive: {\n                        DEFAULT: \"hsl(var(--destructive))\",\n                        foreground: \"hsl(var(--destructive-foreground))\",\n                    },\n                    muted: {\n                        DEFAULT: \"hsl(var(--muted))\",\n                        foreground: \"hsl(var(--muted-foreground))\",\n                    },\n                    accent: {\n                        DEFAULT: \"hsl(var(--accent))\",\n                        foreground: \"hsl(var(--accent-foreground))\",\n                    },\n                    popover: {\n                        DEFAULT: \"hsl(var(--popover))\",\n                        foreground: \"hsl(var(--popover-foreground))\",\n                    },\n                    card: {\n                        DEFAULT: \"hsl(var(--card))\",\n                        foreground: \"hsl(var(--card-foreground))\",\n                    },\n                },\n                borderRadius: {\n                    lg: \"var(--radius)\",\n                    md: \"calc(var(--radius) - 2px)\",\n                    sm: \"calc(var(--radius) - 4px)\",\n                },\n            },\n        },\n        plugins: [require(\"tailwindcss-animate\")],\n    }\n        "
    },
    {
      "filePath": "src/components/ui/button.tsx",
      "content": "\n    import * as React from \"react\"\n    import { Slot } from \"@radix-ui/react-slot\"\n    import { cva, type VariantProps } from \"class-variance-authority\"\n    import { cn } from \"@/lib/utils\"\n\n    const buttonVariants = cva(\n        \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n        {\n            variants: {\n                variant: {\n                    default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n                    destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n                    outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n                    secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n                    ghost: \"hover:bg-accent hover:text-accent-foreground\",\n                    link: \"text-primary underline-offset-4 hover:underline\",\n                },\n                size: {\n                    default: \"h-10 px-4 py-2\",\n                    sm: \"h-9 rounded-md px-3\",\n                    lg: \"h-11 rounded-md px-8\",\n                    icon: \"h-10 w-10\",\n                },\n            },\n            defaultVariants: {\n                variant: \"default\",\n                size: \"default\",\n            },\n        }\n    )\n\n    export interface ButtonProps\n        extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n        VariantProps<typeof buttonVariants> {\n        asChild?: boolean\n    }\n\n    const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n        ({ className, variant, size, asChild = false, ...props }, ref) => {\n            const Comp = asChild ? Slot : \"button\"\n            return (\n                <Comp\n        className= { cn(buttonVariants({ variant, size, className }))\n}\nref = { ref }\n{ ...props }\n        />\n    )\n}\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"
    },
    {
      "filePath": "src/components/ui/input.tsx",
      "content": "\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n    extends React.InputHTMLAttributes<HTMLInputElement> { }\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n    ({ className, type, ...props }, ref) => {\n        return (\n            <input\n        type= { type }\n        className = {\n            cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n                className\n            )\n        }\n        ref = { ref }\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"
    },
    {
      "filePath": "src/components/ui/label.tsx",
      "content": "\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n    \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n    React.ElementRef<typeof LabelPrimitive.Root>,\n    React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n    <LabelPrimitive.Root\n    ref= { ref }\n    className = { cn(labelVariants(), className)}\n{...props }\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"
    },
    {
      "filePath": "src/components/ui/table.tsx",
      "content": "\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n    HTMLTableElement,\n    React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n    <div className= \"relative w-full overflow-auto\" >\n    <table\n      ref={ ref }\n      className = { cn(\"w-full caption-bottom text-sm\", className) }\n      { ...props }\n    />\n    </div>\n))\n    Table.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n    HTMLTableSectionElement,\n    React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n    <thead ref= { ref } className = { cn(\"[&_tr]:border-b\", className) } { ...props } />\n))\n    TableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n    HTMLTableSectionElement,\n    React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n    <tbody\n    ref= { ref }\n    className = { cn(\"[&_tr:last-child]:border-0\", className) }\n    { ...props }\n    />\n))\n    TableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n    HTMLTableSectionElement,\n    React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n    <tfoot\n    ref= { ref }\n    className = {\n        cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n            className\n        )\n    }\n    { ...props }\n    />\n))\n    TableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n    HTMLTableRowElement,\n    React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n    <tr\n    ref= { ref }\n    className = {\n        cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n            className\n        )\n    }\n    { ...props }\n    />\n))\n    TableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n    HTMLTableCellElement,\n    React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n    <th\n    ref= { ref }\n    className = {\n        cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n            className\n        )\n    }\n    { ...props }\n    />\n))\n    TableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n    HTMLTableCellElement,\n    React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n    <td\n    ref= { ref }\n    className = { cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className) }\n    { ...props }\n    />\n))\n    TableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n    HTMLTableCaptionElement,\n    React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n    <caption\n    ref= { ref }\n    className = { cn(\"mt-4 text-sm text-muted-foreground\", className) }\n    { ...props }\n    />\n))\n    TableCaption.displayName = \"TableCaption\"\n\nexport {\n    Table,\n    TableHeader,\n    TableBody,\n    TableFooter,\n    TableHead,\n    TableRow,\n    TableCell,\n    TableCaption,\n}\n"
    },
    {
      "filePath": "src/components/ui/select.tsx",
      "content": "\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n    React.ElementRef<typeof SelectPrimitive.Trigger>,\n    React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n    <SelectPrimitive.Trigger\n    ref= { ref }\n    className = {\n        cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n            className\n        )\n    }\n    { ...props }\n    >\n    { children }\n    < SelectPrimitive.Icon asChild >\n<ChevronDown className=\"h-4 w-4 opacity-50\" />\n</SelectPrimitive.Icon>\n</SelectPrimitive.Trigger>\n))\n    SelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n    React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n    React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n    <SelectPrimitive.ScrollUpButton\n    ref= { ref }\n    className = {\n        cn(\n      \"flex cursor-default items-center justify-center py-1\",\n            className\n        )\n    }\n    { ...props }\n    >\n    <ChevronUp className=\"h-4 w-4\" />\n</SelectPrimitive.ScrollUpButton>\n))\n    SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n    React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n    React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n    <SelectPrimitive.ScrollDownButton\n    ref= { ref }\n    className = {\n        cn(\n      \"flex cursor-default items-center justify-center py-1\",\n            className\n        )\n    }\n    { ...props }\n    >\n    <ChevronDown className=\"h-4 w-4\" />\n</SelectPrimitive.ScrollDownButton>\n))\n    SelectScrollDownButton.displayName =\n        SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n    React.ElementRef<typeof SelectPrimitive.Content>,\n    React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n    <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref= { ref }\n      className = {\n        cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n            position === \"popper\" &&\n    \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n    className\n)}\nposition = { position }\n{...props }\n    >\n    <SelectScrollUpButton />\n    < SelectPrimitive.Viewport\nclassName = {\n    cn(\n          \"p-1\",\n        position === \"popper\" &&\n    \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n    { children }\n    </SelectPrimitive.Viewport>\n    < SelectScrollDownButton />\n    </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n    React.ElementRef<typeof SelectPrimitive.Label>,\n    React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n    <SelectPrimitive.Label\n    ref= { ref }\n    className = { cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className) }\n    { ...props }\n    />\n))\n    SelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n    React.ElementRef<typeof SelectPrimitive.Item>,\n    React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n    <SelectPrimitive.Item\n    ref= { ref }\n    className = {\n        cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n            className\n        )\n    }\n    { ...props }\n    >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\" >\n<SelectPrimitive.ItemIndicator>\n<Check className=\"h-4 w-4\" />\n</SelectPrimitive.ItemIndicator>\n</span>\n\n< SelectPrimitive.ItemText > { children } </SelectPrimitive.ItemText>\n</SelectPrimitive.Item>\n))\n    SelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n    React.ElementRef<typeof SelectPrimitive.Separator>,\n    React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n    <SelectPrimitive.Separator\n    ref= { ref }\n    className = { cn(\"-mx-1 my-1 h-px bg-muted\", className) }\n    { ...props }\n    />\n))\n    SelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n    Select,\n    SelectGroup,\n    SelectValue,\n    SelectTrigger,\n    SelectContent,\n    SelectLabel,\n    SelectItem,\n    SelectSeparator,\n    SelectScrollUpButton,\n    SelectScrollDownButton,\n}\n"
    },
    {
      "filePath": "src/lib/api.ts",
      "content": "\nimport axios from 'axios';\n\nexport const api = axios.create({\n    baseURL: '/api', // Proxy handled by Vite or configured elsewhere\n});\n\napi.interceptors.response.use(\n    (response) => response.data,\n    (error) => {\n        // Handle global errors (401, 403, etc.)\n        return Promise.reject(error);\n    }\n);\n"
    },
    {
      "filePath": "src/lib/schemas.ts",
      "content": "import { z } from 'zod';\n\n\nexport const UserSchema = z.object({\n      id: z.string().uuid(), \n  email: z.string(), \n  name: z.string(), \n  role: z.string(), \n  isActive: z.boolean(), \n});\n\nexport const CreateUserSchema = UserSchema.omit({ id: true, createdAt: true, updatedAt: true });\nexport const UpdateUserSchema = UserSchema.partial().omit({ id: true, createdAt: true, updatedAt: true });\n\nexport type User = z.infer < typeof UserSchema>;\nexport type CreateUser = z.infer < typeof CreateUserSchema>;\nexport type UpdateUser = z.infer < typeof UpdateUserSchema>;\n\n\nexport const PostSchema = z.object({\n      id: z.string().uuid(), \n  title: z.string(), \n  content: z.string(), \n  published: z.boolean(), \n  authorId: z.string().uuid(), \n});\n\nexport const CreatePostSchema = PostSchema.omit({ id: true, createdAt: true, updatedAt: true });\nexport const UpdatePostSchema = PostSchema.partial().omit({ id: true, createdAt: true, updatedAt: true });\n\nexport type Post = z.infer < typeof PostSchema>;\nexport type CreatePost = z.infer < typeof CreatePostSchema>;\nexport type UpdatePost = z.infer < typeof UpdatePostSchema>;\n\n"
    },
    {
      "filePath": "src/lib/queries.ts",
      "content": "\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { api } from './api';\nimport { User, CreateUser, UpdateUser, Post, CreatePost, UpdatePost } from './schemas';\n\n\n// --- User ---\nexport const useUsers = () => {\n    return useQuery < User [] > ({\n        queryKey: ['Users'],\n        queryFn: () => api.get('/users')\n    });\n};\n\nexport const useUser = (id: string) => {\n    return useQuery < User> ({\n        queryKey: ['Users', id],\n        queryFn: () => api.get(`/users/${id}`),\n                        enabled: !!id\n                    });\n                };\n\nexport const useCreateUser = () => {\n  const queryClient = useQueryClient();\n  return useMutation<User, Error, CreateUser>({\n    mutationFn: (data) => api.post('/users', data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['Users'] });\n    }\n  });\n};\n\nexport const useUpdateUser = () => {\n  const queryClient = useQueryClient();\n  return useMutation<User, Error, { id: string, data: UpdateUser }>({\n    mutationFn: ({ id, data }) => api.patch(`/users/${id}`, data),\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['Users'] });\n      queryClient.invalidateQueries({ queryKey: ['Users', data.id] });\n    }\n  });\n};\n\nexport const useDeleteUser = () => {\n  const queryClient = useQueryClient();\n  return useMutation<void, Error, string>({\n    mutationFn: (id) => api.delete(`/users/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['Users'] });\n    }\n  });\n};\n\n\n// --- Post ---\nexport const usePosts = () => {\n    return useQuery < Post [] > ({\n        queryKey: ['Posts'],\n        queryFn: () => api.get('/posts')\n    });\n};\n\nexport const usePost = (id: string) => {\n    return useQuery < Post> ({\n        queryKey: ['Posts', id],\n        queryFn: () => api.get(`/posts/${id}`),\n                        enabled: !!id\n                    });\n                };\n\nexport const useCreatePost = () => {\n  const queryClient = useQueryClient();\n  return useMutation<Post, Error, CreatePost>({\n    mutationFn: (data) => api.post('/posts', data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['Posts'] });\n    }\n  });\n};\n\nexport const useUpdatePost = () => {\n  const queryClient = useQueryClient();\n  return useMutation<Post, Error, { id: string, data: UpdatePost }>({\n    mutationFn: ({ id, data }) => api.patch(`/posts/${id}`, data),\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['Posts'] });\n      queryClient.invalidateQueries({ queryKey: ['Posts', data.id] });\n    }\n  });\n};\n\nexport const useDeletePost = () => {\n  const queryClient = useQueryClient();\n  return useMutation<void, Error, string>({\n    mutationFn: (id) => api.delete(`/posts/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['Posts'] });\n    }\n  });\n};\n\n"
    },
    {
      "filePath": "src/lib/realtime.ts",
      "content": "\n                import { useEffect } from 'react';\n                import { useQueryClient } from '@tanstack/react-query';\n\n                export function useRealtime() {\n                    const queryClient = useQueryClient();\n\n                    useEffect(() => {\n                        console.log('Connecting to mock realtime socket...');\n                        // Mock WebSocket connection\n                        const interval = setInterval(() => {\n                            // Simulate receiving an event\n                            // In a real app, this would be a WebSocket message\n                            // console.log('Received mock realtime update');\n                            // queryClient.invalidateQueries({ queryKey: ['some-key'] });\n                        }, 5000);\n\n                        return () => clearInterval(interval);\n                    }, [queryClient]);\n                }\n                "
    },
    {
      "filePath": "vitest.config.ts",
      "content": "\n                import { defineConfig } from 'vitest/config'\n                import react from '@vitejs/plugin-react'\n                import path from 'path'\n\n                export default defineConfig({\n                    plugins: [react()],\n                    test: {\n                        environment: 'jsdom',\n                        globals: true,\n                        setupFiles: './src/setupTests.ts',\n                    },\n                    resolve: {\n                        alias: {\n                            \"@\": path.resolve(__dirname, \"./src\"),\n                        },\n                    },\n                })\n                    "
    },
    {
      "filePath": "src/setupTests.ts",
      "content": "\n                import '@testing-library/jest-dom'\n                "
    },
    {
      "filePath": "src/pages/UserList.test.tsx",
      "content": "\nimport { render, screen, fireEvent } from '@/lib/test-utils'\nimport { UserList } from './UserList'\nimport { describe, it, expect, vi } from 'vitest'\nimport * as queries from '@/lib/queries'\n\n// Mock the queries\nvi.mock('@/lib/queries', () => ({\n    useUsers: vi.fn(),\n    useDeleteUser: vi.fn()\n}))\n\ndescribe('UserList', () => {\n    it('renders loading state', () => {\n        vi.mocked(queries.useUsers).mockReturnValue({\n            data: undefined,\n            isLoading: true,\n            error: null\n        } as any)\n\n        render(<UserList />)\n        expect(screen.getByText('Loading...')).toBeInTheDocument()\n    })\n\n    it('renders error state', () => {\n        vi.mocked(queries.useUsers).mockReturnValue({\n            data: undefined,\n            isLoading: false,\n            error: { message: 'Failed to fetch' }\n        } as any)\n\n        render(<UserList />)\n        expect(screen.getByText('Error: Failed to fetch')).toBeInTheDocument()\n    })\n\n    it('renders list of items', () => {\n        const mockData = [\n            { id: '1', name: 'Test Item 1' },\n            { id: '2', name: 'Test Item 2' }\n        ]\n\n        vi.mocked(queries.useUsers).mockReturnValue({\n            data: mockData,\n            isLoading: false,\n            error: null\n        } as any)\n\n        vi.mocked(queries.useDeleteUser).mockReturnValue({\n            mutate: vi.fn()\n        } as any)\n\n        render(<UserList />)\n        expect(screen.getByText('Test Item 1')).toBeInTheDocument()\n        expect(screen.getByText('Test Item 2')).toBeInTheDocument()\n    })\n\n    it('delete button triggers mutation', () => {\n        const mockData = [{ id: '1', name: 'Test Item' }]\n        const mockDelete = vi.fn()\n\n        vi.mocked(queries.useUsers).mockReturnValue({\n            data: mockData,\n            isLoading: false,\n            error: null\n        } as any)\n\n        vi.mocked(queries.useDeleteUser).mockReturnValue({\n            mutate: mockDelete\n        } as any)\n\n        // Mock confirm\n        global.confirm = vi.fn(() => true)\n\n        render(<UserList />)\n        \n        const deleteBtn = screen.getByText('Delete')\n        fireEvent.click(deleteBtn)\n\n        expect(global.confirm).toHaveBeenCalled()\n        expect(mockDelete).toHaveBeenCalledWith('1')\n    })\n})\n"
    },
    {
      "filePath": "src/pages/UserDetail.test.tsx",
      "content": "\nimport { render, screen, fireEvent } from '@/lib/test-utils'\nimport { UserDetail } from './UserDetail'\nimport { describe, it, expect, vi } from 'vitest'\nimport * as queries from '@/lib/queries'\nimport { useParams, useNavigate } from 'react-router-dom'\n\n// Mock queries and router\nvi.mock('@/lib/queries', () => ({\n    useUser: vi.fn(),\n    useDeleteUser: vi.fn()\n}))\n\nvi.mock('react-router-dom', async () => {\n    const actual = await vi.importActual('react-router-dom')\n    return {\n        ...actual,\n        useParams: vi.fn(),\n        useNavigate: vi.fn()\n    }\n})\n\ndescribe('UserDetail', () => {\n    it('renders loading state', () => {\n        vi.mocked(useParams).mockReturnValue({ id: '1' })\n        vi.mocked(queries.useUser).mockReturnValue({\n            data: undefined,\n            isLoading: true,\n            error: null\n        } as any)\n\n        render(<UserDetail />)\n        expect(screen.getByText('Loading...')).toBeInTheDocument()\n    })\n\n    it('renders item details', () => {\n        const mockItem = { id: '1', name: 'Detail Item' }\n        vi.mocked(useParams).mockReturnValue({ id: '1' })\n        vi.mocked(queries.useUser).mockReturnValue({\n            data: mockItem,\n            isLoading: false,\n            error: null\n        } as any)\n        vi.mocked(queries.useDeleteUser).mockReturnValue({ mutate: vi.fn() } as any)\n\n        render(<UserDetail />)\n        expect(screen.getByText('Detail Item')).toBeInTheDocument()\n    })\n})\n"
    },
    {
      "filePath": "src/pages/UserForm.test.tsx",
      "content": "\nimport { render, screen, fireEvent, waitFor } from '@/lib/test-utils'\nimport { UserForm } from './UserForm'\nimport { describe, it, expect, vi, beforeEach } from 'vitest'\nimport * as queries from '@/lib/queries'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport userEvent from '@testing-library/user-event'\n\n// Mock queries and router\nvi.mock('@/lib/queries', () => ({\n    useUser: vi.fn(),\n    useCreateUser: vi.fn(),\n    useUpdateUser: vi.fn(),\n    \n}))\n\nvi.mock('react-router-dom', async () => {\n    const actual = await vi.importActual('react-router-dom')\n    return {\n        ...actual,\n        useParams: vi.fn(),\n        useNavigate: vi.fn()\n    }\n})\n\ndescribe('UserForm', () => {\n    const mockNavigate = vi.fn()\n    const mockCreate = vi.fn()\n    const mockUpdate = vi.fn()\n\n    beforeEach(() => {\n        vi.clearAllMocks()\n        vi.mocked(useNavigate).mockReturnValue(mockNavigate)\n        vi.mocked(queries.useCreateUser).mockReturnValue({ mutate: mockCreate, isPending: false } as any)\n        vi.mocked(queries.useUpdateUser).mockReturnValue({ mutate: mockUpdate, isPending: false } as any)\n        \n        // Mock relations if any\n        \n    })\n\n    it('renders create form', () => {\n        vi.mocked(useParams).mockReturnValue({}) // No ID = Create mode\n        vi.mocked(queries.useUser).mockReturnValue({ data: null, isLoading: false } as any)\n\n        render(<UserForm />)\n        expect(screen.getByText('Create User')).toBeInTheDocument()\n    })\n\n    it('renders edit form with data', () => {\n        const mockData = { id: '1', name: 'Edit Item' }\n        vi.mocked(useParams).mockReturnValue({ id: '1' })\n        vi.mocked(queries.useUser).mockReturnValue({ data: mockData, isLoading: false } as any)\n\n        render(<UserForm />)\n        expect(screen.getByText('Edit User')).toBeInTheDocument()\n        expect(screen.getByDisplayValue('Edit Item')).toBeInTheDocument()\n    })\n})\n"
    },
    {
      "filePath": "src/pages/PostList.test.tsx",
      "content": "\nimport { render, screen, fireEvent } from '@/lib/test-utils'\nimport { PostList } from './PostList'\nimport { describe, it, expect, vi } from 'vitest'\nimport * as queries from '@/lib/queries'\n\n// Mock the queries\nvi.mock('@/lib/queries', () => ({\n    usePosts: vi.fn(),\n    useDeletePost: vi.fn()\n}))\n\ndescribe('PostList', () => {\n    it('renders loading state', () => {\n        vi.mocked(queries.usePosts).mockReturnValue({\n            data: undefined,\n            isLoading: true,\n            error: null\n        } as any)\n\n        render(<PostList />)\n        expect(screen.getByText('Loading...')).toBeInTheDocument()\n    })\n\n    it('renders error state', () => {\n        vi.mocked(queries.usePosts).mockReturnValue({\n            data: undefined,\n            isLoading: false,\n            error: { message: 'Failed to fetch' }\n        } as any)\n\n        render(<PostList />)\n        expect(screen.getByText('Error: Failed to fetch')).toBeInTheDocument()\n    })\n\n    it('renders list of items', () => {\n        const mockData = [\n            { id: '1', title: 'Test Item 1' },\n            { id: '2', title: 'Test Item 2' }\n        ]\n\n        vi.mocked(queries.usePosts).mockReturnValue({\n            data: mockData,\n            isLoading: false,\n            error: null\n        } as any)\n\n        vi.mocked(queries.useDeletePost).mockReturnValue({\n            mutate: vi.fn()\n        } as any)\n\n        render(<PostList />)\n        expect(screen.getByText('Test Item 1')).toBeInTheDocument()\n        expect(screen.getByText('Test Item 2')).toBeInTheDocument()\n    })\n\n    it('delete button triggers mutation', () => {\n        const mockData = [{ id: '1', title: 'Test Item' }]\n        const mockDelete = vi.fn()\n\n        vi.mocked(queries.usePosts).mockReturnValue({\n            data: mockData,\n            isLoading: false,\n            error: null\n        } as any)\n\n        vi.mocked(queries.useDeletePost).mockReturnValue({\n            mutate: mockDelete\n        } as any)\n\n        // Mock confirm\n        global.confirm = vi.fn(() => true)\n\n        render(<PostList />)\n        \n        const deleteBtn = screen.getByText('Delete')\n        fireEvent.click(deleteBtn)\n\n        expect(global.confirm).toHaveBeenCalled()\n        expect(mockDelete).toHaveBeenCalledWith('1')\n    })\n})\n"
    },
    {
      "filePath": "src/pages/PostDetail.test.tsx",
      "content": "\nimport { render, screen, fireEvent } from '@/lib/test-utils'\nimport { PostDetail } from './PostDetail'\nimport { describe, it, expect, vi } from 'vitest'\nimport * as queries from '@/lib/queries'\nimport { useParams, useNavigate } from 'react-router-dom'\n\n// Mock queries and router\nvi.mock('@/lib/queries', () => ({\n    usePost: vi.fn(),\n    useDeletePost: vi.fn()\n}))\n\nvi.mock('react-router-dom', async () => {\n    const actual = await vi.importActual('react-router-dom')\n    return {\n        ...actual,\n        useParams: vi.fn(),\n        useNavigate: vi.fn()\n    }\n})\n\ndescribe('PostDetail', () => {\n    it('renders loading state', () => {\n        vi.mocked(useParams).mockReturnValue({ id: '1' })\n        vi.mocked(queries.usePost).mockReturnValue({\n            data: undefined,\n            isLoading: true,\n            error: null\n        } as any)\n\n        render(<PostDetail />)\n        expect(screen.getByText('Loading...')).toBeInTheDocument()\n    })\n\n    it('renders item details', () => {\n        const mockItem = { id: '1', title: 'Detail Item' }\n        vi.mocked(useParams).mockReturnValue({ id: '1' })\n        vi.mocked(queries.usePost).mockReturnValue({\n            data: mockItem,\n            isLoading: false,\n            error: null\n        } as any)\n        vi.mocked(queries.useDeletePost).mockReturnValue({ mutate: vi.fn() } as any)\n\n        render(<PostDetail />)\n        expect(screen.getByText('Detail Item')).toBeInTheDocument()\n    })\n})\n"
    },
    {
      "filePath": "src/pages/PostForm.test.tsx",
      "content": "\nimport { render, screen, fireEvent, waitFor } from '@/lib/test-utils'\nimport { PostForm } from './PostForm'\nimport { describe, it, expect, vi, beforeEach } from 'vitest'\nimport * as queries from '@/lib/queries'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport userEvent from '@testing-library/user-event'\n\n// Mock queries and router\nvi.mock('@/lib/queries', () => ({\n    usePost: vi.fn(),\n    useCreatePost: vi.fn(),\n    useUpdatePost: vi.fn(),\n    useUsers: vi.fn(),\n}))\n\nvi.mock('react-router-dom', async () => {\n    const actual = await vi.importActual('react-router-dom')\n    return {\n        ...actual,\n        useParams: vi.fn(),\n        useNavigate: vi.fn()\n    }\n})\n\ndescribe('PostForm', () => {\n    const mockNavigate = vi.fn()\n    const mockCreate = vi.fn()\n    const mockUpdate = vi.fn()\n\n    beforeEach(() => {\n        vi.clearAllMocks()\n        vi.mocked(useNavigate).mockReturnValue(mockNavigate)\n        vi.mocked(queries.useCreatePost).mockReturnValue({ mutate: mockCreate, isPending: false } as any)\n        vi.mocked(queries.useUpdatePost).mockReturnValue({ mutate: mockUpdate, isPending: false } as any)\n        \n        // Mock relations if any\n        \n        vi.mocked(queries.useUsers).mockReturnValue({ \n            data: [{ id: '1', title: 'Related Item' }], \n            isLoading: false \n        } as any)\n        \n    })\n\n    it('renders create form', () => {\n        vi.mocked(useParams).mockReturnValue({}) // No ID = Create mode\n        vi.mocked(queries.usePost).mockReturnValue({ data: null, isLoading: false } as any)\n\n        render(<PostForm />)\n        expect(screen.getByText('Create Post')).toBeInTheDocument()\n    })\n\n    it('renders edit form with data', () => {\n        const mockData = { id: '1', title: 'Edit Item' }\n        vi.mocked(useParams).mockReturnValue({ id: '1' })\n        vi.mocked(queries.usePost).mockReturnValue({ data: mockData, isLoading: false } as any)\n\n        render(<PostForm />)\n        expect(screen.getByText('Edit Post')).toBeInTheDocument()\n        expect(screen.getByDisplayValue('Edit Item')).toBeInTheDocument()\n    })\n})\n"
    },
    {
      "filePath": "src/lib/test-utils.tsx",
      "content": "\nimport React, { ReactElement } from 'react'\nimport { render, RenderOptions } from '@testing-library/react'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\nimport { BrowserRouter } from 'react-router-dom'\n\nconst createTestQueryClient = () => new QueryClient({\n    defaultOptions: {\n        queries: {\n            retry: false,\n        },\n    },\n})\n\nconst AllTheProviders = ({ children }: { children: React.ReactNode }) => {\n    const queryClient = createTestQueryClient()\n    return (\n        <QueryClientProvider client={queryClient}>\n            <BrowserRouter>\n                {children}\n            </BrowserRouter>\n        </QueryClientProvider>\n    )\n}\n\nconst customRender = (\n    ui: ReactElement,\n    options?: Omit<RenderOptions, 'wrapper'>,\n) => render(ui, { wrapper: AllTheProviders, ...options })\n\nexport * from '@testing-library/react'\nexport { customRender as render }\n"
    },
    {
      "filePath": "src/components/ui/input.test.tsx",
      "content": "\nimport { render, screen } from '@/lib/test-utils'\nimport { Input } from './input'\nimport { describe, it, expect } from 'vitest'\n\ndescribe('Input', () => {\n    it('renders correctly', () => {\n        render(<Input placeholder=\"Enter text\" />)\n        expect(screen.getByPlaceholderText('Enter text')).toBeInTheDocument()\n    })\n\n    it('applies custom classes', () => {\n        render(<Input className=\"custom-class\" data-testid=\"input\" />)\n        expect(screen.getByTestId('input')).toHaveClass('custom-class')\n    })\n})\n"
    },
    {
      "filePath": "src/components/ui/label.test.tsx",
      "content": "\nimport { render, screen } from '@/lib/test-utils'\nimport { Label } from './label'\nimport { describe, it, expect } from 'vitest'\n\ndescribe('Label', () => {\n    it('renders correctly', () => {\n        render(<Label htmlFor=\"test-input\">Test Label</Label>)\n        expect(screen.getByText('Test Label')).toBeInTheDocument()\n    })\n})\n"
    },
    {
      "filePath": "src/components/ui/table.test.tsx",
      "content": "\nimport { render, screen } from '@/lib/test-utils'\nimport { Table, TableHeader, TableBody, TableRow, TableHead, TableCell } from './table'\nimport { describe, it, expect } from 'vitest'\n\ndescribe('Table', () => {\n    it('renders correctly', () => {\n        render(\n            <Table>\n                <TableHeader>\n                    <TableRow>\n                        <TableHead>Header</TableHead>\n                    </TableRow>\n                </TableHeader>\n                <TableBody>\n                    <TableRow>\n                        <TableCell>Cell</TableCell>\n                    </TableRow>\n                </TableBody>\n            </Table>\n        )\n        expect(screen.getByText('Header')).toBeInTheDocument()\n        expect(screen.getByText('Cell')).toBeInTheDocument()\n    })\n})\n"
    },
    {
      "filePath": "src/components/ui/select.test.tsx",
      "content": "\nimport { render, screen, userEvent } from '@/lib/test-utils'\nimport { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from './select'\nimport { describe, it, expect } from 'vitest'\n\ndescribe('Select', () => {\n    it('renders correctly', () => {\n        render(\n            <Select>\n                <SelectTrigger>\n                    <SelectValue placeholder=\"Select an option\" />\n                </SelectTrigger>\n                <SelectContent>\n                    <SelectItem value=\"opt1\">Option 1</SelectItem>\n                </SelectContent>\n            </Select>\n        )\n        expect(screen.getByText('Select an option')).toBeInTheDocument()\n    })\n})\n"
    },
    {
      "filePath": "src/lib/utils.test.ts",
      "content": "\n                import { describe, it, expect } from 'vitest'\n                import { cn } from './utils'\n\n                describe('cn utility', () => {\n                    it('merges class names correctly', () => {\n                        expect(cn('c1', 'c2')).toBe('c1 c2')\n                    })\n\n                    it('handles conditional classes', () => {\n                        expect(cn('c1', true && 'c2', false && 'c3')).toBe('c1 c2')\n                    })\n\n                    it('merges tailwind classes', () => {\n                        expect(cn('p-4', 'p-2')).toBe('p-2')\n                    })\n                })\n                    "
    },
    {
      "filePath": "src/components/ui/button.test.tsx",
      "content": "\n                import { render, screen } from '@testing-library/react'\n                import { Button } from './button'\n                import { describe, it, expect } from 'vitest'\n\n                describe('Button', () => {\n                    it('renders correctly', () => {\n                        render(<Button>Click me </Button>)\n                        expect(screen.getByRole('button', { name: /click me/i })).toBeInTheDocument()\n                    })\n\n                    it('applies variant classes', () => {\n                        render(<Button variant=\"destructive\" > Delete </Button>)\n                        const button = screen.getByRole('button', { name: /delete/i })\n                        expect(button).toHaveClass('bg-destructive')\n                    })\n                })\n                    "
    }
  ]
}
